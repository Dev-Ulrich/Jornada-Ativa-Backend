# =======================
# Porta dinâmica no Render
# =======================
server.port=${PORT:8080}

# =======================
# Datasource via ENV do Render
# =======================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Pool/Hibernate (dialect fixo + TLS 1.2)
spring.datasource.hikari.maximum-pool-size=5
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.datasource.hikari.data-source-properties.sslProtocol=TLSv1.2

# ATENÇÃO:
# Se o schema do banco JÁ EXISTE, prefira 'validate'.
# Se é o primeiro deploy (banco vazio), use 'update' e depois troque para 'validate'.
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# CORS: inclua sua URL da Vercel

app.cors.allowed-origins=https://jornada-ativa.vercel.app
app.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
app.cors.allowed-headers=Authorization,Content-Type,Accept,Origin
app.cors.exposed-headers=Authorization
app.cors.allow-credentials=true

# Erros (produção)
server.error.include-message=never
server.error.include-stacktrace=never

# Locale/Timezone
spring.jackson.time-zone=America/Sao_Paulo
spring.jackson.locale=pt_BR
spring.jpa.properties.hibernate.jdbc.time_zone=America/Sao_Paulo
